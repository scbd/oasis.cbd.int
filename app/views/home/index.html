<div ng-controller="IndexController">
  <section class="content-header">
    <h1>
      Dashboard
    </h1>
  </section>
  <section class="content" style="height: auto !important; min-height: 0px !important;">    
    <!-- Small boxes (Stat box) -->
    <div class="row">
      <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-aqua">
          <div class="inner">
            <h3>{{count.articles}}</h3>

            <p>Articles</p>
          </div>
          <div class="icon">
            <i class="ion ion-bag"></i>
          </div>
          <a href="{{baseUrl}}articles" class="small-box-footer">See all <i class="fa fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-green">
          <div class="inner">
            <h3>{{count.widgets}}</h3>

            <p>Widgets</p>
          </div>
          <div class="icon">
            <i class="ion ion-stats-bars"></i>
          </div>
          <a href="{{baseUrl}}widgets" class="small-box-footer">See all <i class="fa fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-yellow">
          <div class="inner">
            <h3>{{count.projects}}</h3>

            <p>Public repositories</p>
          </div>
          <div class="icon">
            <i class="ion ion-person-add"></i>
          </div>
          <a href="{{baseUrl}}projects" class="small-box-footer">See all <i class="fa fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-red">
          <div class="inner">
            <h3>{{count.failedWorkflows}}</h3>

            <p>Failed workflows</p>
          </div>
          <div class="icon">
            <i class="ion ion-pie-graph"></i>
          </div>
          <a href="{{baseUrl}}workflows" class="small-box-footer">See all <i class="fa fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
    </div>
    <!-- /.row -->
    <div class="row">
      <!-- Left col -->
      <div class="col-md-12">

        <div class="row">
          <div class="col-md-8">
            <div class="nav-tabs-custom" style="cursor: move;">
              <ul class="nav nav-tabs pull-right ui-sortable-handle">
                <li class=""><a href="#my-articles" data-toggle="tab" aria-expanded="false">My articles</a></li>
                <li class="active"><a href="#all-articles" data-toggle="tab" aria-expanded="true">All articles</a></li>
                <li class="pull-left header"><i class="fa fa-inbox"></i> Articles</li>
              </ul>
              <div class="tab-content no-padding">
               
                <div class="chart tab-pane active" id="all-articles"
                  style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                  <div class="table-responsive">
                    <table class="table no-margin">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>Title</th>
                          <th>Updated by</th>
                          <th>Updated on</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="article in articles.all">
                          <td ng-bind="$index+1"></td>
                          <td style="width: 60%;">
                            <a ng-href="articles/{{article._id}}">
                              <span ng-bind="article.title|lstring"></span>
                            </a>
                          </td>
                          <td ng-bind="article.meta.modifiedByInfo.firstName + ' ' + article.meta.modifiedByInfo.lastName"></td>
                          <td ng-bind="article.meta.modifiedOn|formatDate:'DD MMM YYYY HH:MM'"></td>
                          <td>
                            <a ng-href="articles/{{article._id}}/edit">
                              <i class="fa fa-edit" />
                            </a>                          
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="chart tab-pane" id="my-articles"
                  style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                  <div class="table-responsive">
                    <table class="table no-margin">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>Title</th>
                          <th>Updated by</th>
                          <th>Updated on</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="article in articles.my">
                          <td ng-bind="$index+1"></td>
                          <td style="width: 60%;">
                            <a ng-href="articles/{{article._id}}">
                              <span ng-bind="article.title|lstring"></span>
                            </a>
                          </td>
                          <td ng-bind="article.meta.modifiedByInfo.firstName + ' ' + article.meta.modifiedByInfo.lastName"></td>
                          <td ng-bind="article.meta.modifiedOn|formatDate:'DD MMM YYYY HH:MM'"></td>
                          <td>
                            <a ng-href="articles/{{article._id}}/edit">
                              <i class="fa fa-edit" />
                            </a>                          
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="box box-primary">
              <div class="box-header with-border">
                <h3 class="box-title">Recent Widgets</h3>

              </div>
              <!-- /.box-header -->
              <div class="box-body">
                <div class="table-responsive">
                  <table class="table no-margin">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Updated by</th>
                        <th>Updated on</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat="widget in widgets">
                        <td ng-bind="$index+1"></td>
                        <td style="width: 60%;">
                          <a ng-href="widgets/{{widget._id}}">
                            <span ng-bind="widget.name|lstring"></span>
                          </a>
                        </td>
                        <td ng-bind="widget.meta.modifiedByInfo.firstName + ' ' + widget.meta.modifiedByInfo.lastName"></td>
                        <td ng-bind="widget.meta.modifiedOn|formatDate:'DD MMM YYYY HH:MM'"></td>
                        <td>
                          <a ng-href="widgets/{{widget._id}}/edit">
                            <i class="fa fa-edit" />
                          </a>                          
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <!-- /.box-body -->
              <div class="box-footer text-center">
                <a href="{{baseUrl}}widgets" class="uppercase">View all widgets</a>
              </div>
              <!-- /.box-footer -->
            </div>
            <div class="box box-danger">
              <div class="box-header with-border">
                <h3 class="box-title">Active users</h3>

              </div>
              <!-- /.box-header -->
              <div class="box-body no-padding">
                <ul class="users-list clearfix">
                  <li ng-repeat="user in activeUsers">
                    <img src="https://www.gravatar.com/avatar/blaise.fonseca@cbd.int?size=80&default=mm" alt="User Image">
                    {{user}}
                  </li>
                </ul>
              </div>
              <div class="box-footer text-center">
                <a href="javascript:void(0)" class="uppercase">View All Users</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>

</div>